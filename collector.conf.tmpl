input {
  file {
    path => "/load/*/*"
    start_position => "beginning"
  }
}
filter {
  csv {
    separator => "	"
  }
  grok {
    match => ["path","%{GREEDYDATA}/%{GREEDYDATA:type}/%{GREEDYDATA:filename}"]
  }
  mutate
  {
    remove_field => [ "message", "@version", "path"]
  }
}
output {
  redis {
    host => "{{ default .Env.REDIS_HOST "redis" }}"
    port => 6379
    threads => 16
    key => "logstash"
    data_type => "list"
    codec => json
    batch_count => 10000
  }
}
